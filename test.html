<!-- cart-cards.html -->
<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" />
<title>سلة - Cards</title>
<style>
  :root{
    --bg:#f8fbff; --card:#fff; --accent:#0b74f0; --muted:#78849a; --radius:14px;
  }
  body{font-family: "Segoe UI",sans-serif;margin:0;padding:2rem;background:var(--bg);color:#061228}
  .container{max-width:1000px;margin:0 auto}
  h1{text-align:center;margin-bottom:1rem}
  .grid{display:grid;grid-template-columns:1fr 320px;gap:1.2rem;align-items:start}
  .cards{display:grid;gap:1rem}
  .card{background:var(--card);padding:1rem;border-radius:var(--radius);box-shadow:0 8px 22px rgba(10,20,40,0.06)}
  .card .row{display:flex;gap:1rem;align-items:center}
  .card img{width:90px;height:90px;border-radius:10px;object-fit:cover}
  .meta h4{margin:0;font-size:1.05rem} .meta p{margin:4px 0;color:var(--muted)}
  .foot{display:flex;gap:.6rem;align-items:center;margin-top:.6rem}
  .btn{padding:.5rem .8rem;border-radius:10px;border:none;cursor:pointer}
  .btn-ghost{background:#fff;border:1px solid #eef6ff;color:#0b74f0}
  .btn-danger{background:#fff;border:1px solid #ffdede;color:#d23b3b}
  .summary{position:sticky;top:20px}
  .summary .total{font-weight:800;font-size:1.1rem;margin-top:.5rem}
  @media(max-width:900px){ .grid{grid-template-columns:1fr} .summary{position:static} .card img{width:120px;height:120px} }
</style>
</head>
<body>
  <div class="container">
    <h1>سلة — بطاقات</h1>
    <div class="grid">
      <div class="cards" id="cards"></div>

      <aside class="summary card" id="summaryBox">
        <h3>ملخص السلة</h3>
        <div id="sbody"></div>
        <button class="btn" style="background:var(--accent);color:#fff;width:100%;margin-top:10px">إتمام الطلب</button>
      </aside>
    </div>
  </div>

<script>
let items = [
  {id:1,name:"لوحة مفاتيح",selectedSize:"Full",price:8000,quantity:1,currency:"SAR",img:"https://picsum.photos/seed/21/400/400"},
  {id:2,name:"ماوس جيمينج",selectedSize:"قياسي",price:6000,quantity:2,currency:"SAR",img:"https://picsum.photos/seed/22/400/400"}
];

function draw(){
  const cards = document.getElementById('cards'); cards.innerHTML='';
  if(items.length===0){ cards.innerHTML='<div class="card" style="text-align:center;color:#65748b">سلتك فارغة</div>'; updateSummary(); return;}
  items.forEach(it=>{
    const c = document.createElement('div'); c.className='card';
    c.innerHTML = `
      <div class="row">
        <img src="${it.img}" alt="">
        <div class="meta">
          <h4>${it.name}</h4>
          <p>المقاس: ${it.selectedSize}</p>
          <div class="foot">
            <div style="display:flex;gap:.4rem;align-items:center">
              <button class="btn btn-ghost" data-id="${it.id}" onclick="change(${it.id}, -1)">-</button>
              <div style="width:46px;text-align:center">${it.quantity}</div>
              <button class="btn btn-ghost" onclick="change(${it.id}, 1)">+</button>
            </div>
            <button class="btn btn-danger" onclick="remove(${it.id})">حذف</button>
          </div>
        </div>
      </div>
    `;
    cards.appendChild(c);
  });
  updateSummary();
}
function change(id,delta){ items = items.map(it=> it.id===id? {...it, quantity: Math.max(1,it.quantity+delta)}:it); draw(); }
function remove(id){ if(confirm('حذف المنتج؟')) { items = items.filter(it=>it.id!==id); draw(); } }

function updateSummary(){
  const s = document.getElementById('sbody'); s.innerHTML='';
  const subtotal = items.reduce((a,b)=>a + b.price*b.quantity,0);
  const cnt = items.reduce((a,b)=>a + b.quantity,0);
  const disc = subtotal>=35000 ? Math.round(subtotal*0.1) : 0;
  const final = subtotal - disc;
  s.innerHTML += `<div>عدد المنتجات: <strong>${cnt}</strong></div>`;
  s.innerHTML += `<div>الإجمالي: <strong>${subtotal} ${items[0]?.currency||'YER'}</strong></div>`;
  if(disc) s.innerHTML += `<div style="color:#d23b3b">خصم 10%: <strong>- ${disc}</strong></div>`;
  s.innerHTML += `<div class="total">المجموع النهائي: <strong>${final} ${items[0]?.currency||'YER'}</strong></div>`;
}

draw();
</script>
</body>
</html>
